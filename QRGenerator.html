<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>QR Generator</title>
  <link rel="icon"
    href="https://cdn4.iconfinder.com/data/icons/protection-and-security-flat/64/scanner_scan_qr_code_barcode_reader-512.png">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">

  <style>
    :root {
      --primary-color: #00d4aa;
      --bg-dark: #0a0a0a;
      --bg-card: #1a1a1a;
      --bg-card-hover: #252525;
      --text-primary: #e0e0e0;
      --text-secondary: #a0a0a0;
      --accent-gradient: linear-gradient(135deg, #00d4aa 0%, #0066ff 100%);
      --transition-speed: 0.3s;
    }

    body {
      font-family: 'Inter', sans-serif;
      background: var(--bg-dark);
      color: var(--text-primary);
      padding: 2rem;
      display: flex;
      justify-content: center;
      min-height: 100vh;
    }

    .container {
      max-width: 900px;
      width: 100%;
    }

    h1 {
      text-align: center;
      font-size: 2.5rem;
      font-weight: 700;
      background: var(--accent-gradient);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      margin-bottom: 0.5rem;
    }

    .tagline {
      text-align: center;
      color: var(--text-secondary);
      margin-bottom: 2rem;
      font-size: 1rem;
    }

    .card {
      background: var(--bg-card);
      padding: 2rem;
      border-radius: 15px;
      margin-bottom: 2rem;
      border: 1px solid rgba(255, 255, 255, 0.05);
      transition: all var(--transition-speed) ease;
    }

    .card:hover {
      background: var(--bg-card-hover);
      box-shadow: 0 20px 40px rgba(0, 212, 170, 0.1);
    }

    .mode-switch {
      display: flex;
      gap: 1rem;
      margin-bottom: 1.5rem;
    }

    .mode-switch button {
      flex: 1;
      padding: 12px;
      border-radius: 10px;
      border: 1px solid rgba(255, 255, 255, 0.05);
      background: rgba(255, 255, 255, 0.02);
      color: var(--text-secondary);
      font-weight: 600;
      cursor: pointer;
      transition: all var(--transition-speed) ease;
    }

    .mode-switch button.active {
      background: var(--bg-card-hover);
      border: 1px solid var(--primary-color);
      color: var(--primary-color);
    }

    .input-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 1rem;
      margin-bottom: 1.5rem;
    }

    .input-group {
      display: flex;
      flex-direction: column;
    }

    label {
      color: var(--primary-color);
      margin-bottom: 0.5rem;
      font-weight: 500;
      font-size: 0.9rem;
    }

    input,
    select {
      background: rgba(255, 255, 255, 0.05);
      border: 1px solid rgba(255, 255, 255, 0.1);
      color: var(--text-primary);
      padding: 0.8rem;
      border-radius: 8px;
      font-size: 1rem;
      transition: all var(--transition-speed) ease;
    }

    input:focus,
    select:focus {
      outline: none;
      border-color: var(--primary-color);
      box-shadow: 0 0 0 3px rgba(0, 212, 170, 0.15);
    }

    button {
      cursor: pointer;
      font-weight: 600;
      padding: 0.8rem 1.2rem;
      border-radius: 8px;
      border: none;
      background: var(--accent-gradient);
      /* gradient style */
      color: #0a0a0a;
      transition: all 0.3s ease;
    }

    button:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 16px rgba(0, 212, 170, 0.25);
    }

    button:active {
      transform: translateY(0);
      box-shadow: 0 4px 8px rgba(0, 212, 170, 0.15);
    }

    button.secondary {
      background: transparent;
      border: 1px solid rgba(255, 255, 255, 0.06);
      color: var(--text-secondary);
    }

    select option {
      background: var(--bg-card);
      color: var(--text-primary);
      padding: 0.5rem;
    }

    .preview {
      margin-top: 2rem;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 1rem;

    }

    #qrcode {
      background: #fff;
      padding: 16px;
      border-radius: 12px;
      max-width: 100%;
    }

    #logo-container,
    #size-container {
      width: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 1rem;
      margin-top: 1rem;
      flex-wrap: wrap;
    }

    @media (max-width:768px) {
      .input-grid {
        grid-template-columns: 1fr;
      }

      #logo-container,
      #size-container {
        flex-direction: column;
      }
    }
  </style>
</head>

<body>
  <div class="container">
    <h1><i class="fas fa-qrcode"></i> QR Generator</h1>
    <p class="tagline">Generate WiFi or URL QR codes with optional center logo and adjustable size</p>

    <div class="card">
      <div class="mode-switch">
        <button id="mode-wifi" class="active">WiFi</button>
        <button id="mode-url">URL</button>
      </div>

      <!-- WiFi Form -->
      <div id="form-wifi">
        <div class="input-grid">
          <div class="input-group">
            <label for="ssid">SSID</label>
            <input id="ssid" type="text" placeholder="MyHomeWiFi" required>
          </div>
          <div class="input-group">
            <label for="wifi-pass">Password</label>
            <input id="wifi-pass" type="password" placeholder="Leave blank for open network">
          </div>
          <div class="input-group">
            <label for="enc">Encryption</label>
            <select id="enc">
              <option value="WPA">WPA/WPA2</option>
              <option value="WEP">WEP</option>
              <option value="nopass">None</option>
            </select>
          </div>
          <div class="input-group">
            <label><input type="checkbox" id="hidden"> Hidden SSID</label>
          </div>
        </div>
        <div class="action-buttons" style="display:flex;gap:8px;">
          <button id="generate">Generate QR</button>
          <button id="download" class="secondary">Download PNG</button>
          <button id="copyText" class="secondary">Copy Payload</button>
        </div>
      </div>

      <!-- URL Form -->
      <div id="form-url" style="display:none;">
        <div class="input-grid">
          <div class="input-group">
            <label for="url">Website URL</label>
            <input id="url" type="url" placeholder="https://example.com" required>
          </div>
        </div>
        <div class="action-buttons" style="display:flex;gap:8px;">
          <button id="generate-url">Generate QR</button>
          <button id="download-url" class="secondary">Download PNG</button>
          <button id="copy-url" class="secondary">Copy Payload</button>
        </div>
      </div>
    </div>

    <!-- QR Preview + Global Logo & Size -->
    <div class="preview">
      <strong>Preview</strong>
      <div id="qrcode"></div>
      <small id="payloadPreview">&nbsp;</small>

      <div id="size-container">
        <label for="size">Size: <span id="sizeLabel">300</span> px</label>
        <input id="size" type="range" min="128" max="1200" value="300"
          oninput="document.getElementById('sizeLabel').textContent=this.value">
      </div>

      <div id="logo-container">
        <label for="logo">Center logo (optional)</label>
        <input id="logo" type="file" accept="image/*">
      </div>
    </div>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
  <script>
    // Elements
    const elements = {
      modeWiFi: document.getElementById('mode-wifi'),
      modeURL: document.getElementById('mode-url'),
      formWiFi: document.getElementById('form-wifi'),
      formURL: document.getElementById('form-url'),
      ssid: document.getElementById('ssid'),
      pass: document.getElementById('wifi-pass'),
      enc: document.getElementById('enc'),
      hidden: document.getElementById('hidden'),
      url: document.getElementById('url'),
      size: document.getElementById('size'),
      logo: document.getElementById('logo'),
      qrcodeContainer: document.getElementById('qrcode'),
      payloadPreview: document.getElementById('payloadPreview'),
      generateBtn: document.getElementById('generate'),
      generateUrlBtn: document.getElementById('generate-url'),
      downloadBtn: document.getElementById('download'),
      downloadUrlBtn: document.getElementById('download-url'),
      copyBtn: document.getElementById('copyText'),
      copyUrlBtn: document.getElementById('copy-url')
    };

    let logoDataUrl = null;
    let qr = null;

    // Mode switch
    function switchMode(isWiFi) {
      elements.modeWiFi.classList.toggle('active', isWiFi);
      elements.modeURL.classList.toggle('active', !isWiFi);
      elements.formWiFi.style.display = isWiFi ? 'block' : 'none';
      elements.formURL.style.display = isWiFi ? 'none' : 'block';
    }

    elements.modeWiFi.addEventListener('click', () => switchMode(true));
    elements.modeURL.addEventListener('click', () => switchMode(false));

    // Logo upload
    elements.logo.addEventListener('change', e => {
      const file = e.target.files[0];
      if (!file) return logoDataUrl = null;
      const reader = new FileReader();
      reader.onload = () => logoDataUrl = reader.result;
      reader.readAsDataURL(file);
    });

    // Payload functions
    function escapeWiFi(str) { return (str || '').replace(/([\\;,:"])/g, '\\$1'); }

    function wifiPayload() {
      const t = elements.enc.value === 'nopass' ? '' : elements.enc.value;
      const h = elements.hidden.checked ? 'H:true;' : '';
      let payload = `WIFI:T:${t};S:${escapeWiFi(elements.ssid.value)};`;
      if (t) payload += `P:${escapeWiFi(elements.pass.value)};`;
      payload += h + ';';
      return payload.replace(/:+;/g, ';');
    }

    function urlPayload() { return elements.url.value || ''; }

    function getPayload() { return elements.formWiFi.style.display === 'block' ? wifiPayload() : urlPayload(); }

    function clearQr() { elements.qrcodeContainer.innerHTML = ''; }

    function generate(type) {
      let payload = '';
      if (type === 'wifi') {
        payload = wifiPayload();
      } else {
        payload = urlPayload();
      }

      elements.payloadPreview.textContent = payload || '\u00A0';
      clearQr();

      const size = parseInt(elements.size.value || 300);
      qr = new QRCode(elements.qrcodeContainer, { text: payload, width: size, height: size, colorDark: '#000', colorLight: '#fff', correctLevel: QRCode.CorrectLevel.H });

      if (!logoDataUrl) return;

      setTimeout(() => {
        const qrEl = elements.qrcodeContainer.querySelector('img') || elements.qrcodeContainer.querySelector('canvas');
        if (!qrEl) return;
        const canvas = document.createElement('canvas');
        canvas.width = size;
        canvas.height = size;
        const ctx = canvas.getContext('2d');
        ctx.fillStyle = '#fff';
        ctx.fillRect(0, 0, size, size);
        ctx.drawImage(qrEl, 0, 0, size, size);

        const logoImg = new Image();
        logoImg.onload = () => {
          const maxLogo = Math.floor(size * 0.22);
          const scale = Math.min(maxLogo / logoImg.width, maxLogo / logoImg.height, 1);
          const lw = logoImg.width * scale;
          const lh = logoImg.height * scale;
          const lx = (size - lw) / 2;
          const ly = (size - lh) / 2;
          ctx.fillStyle = '#fff';
          ctx.fillRect(lx - 6, ly - 6, lw + 12, lh + 12);
          ctx.drawImage(logoImg, lx, ly, lw, lh);
          elements.qrcodeContainer.innerHTML = '';
          canvas.style.borderRadius = '6px';
          elements.qrcodeContainer.appendChild(canvas);
        };
        logoImg.src = logoDataUrl;
      }, 80);
    }

    function downloadQR() {
      const el = elements.qrcodeContainer.querySelector('canvas') || elements.qrcodeContainer.querySelector('img');
      const size = parseInt(elements.size.value || 300);
      const canvas = document.createElement('canvas');
      canvas.width = size;
      canvas.height = size;
      const ctx = canvas.getContext('2d');
      ctx.fillStyle = '#fff';
      ctx.fillRect(0, 0, size, size);
      ctx.drawImage(el, 0, 0, size, size);
      const a = document.createElement('a');
      a.href = canvas.toDataURL('image/png');
      a.download = 'qr.png';
      a.click();
    }

    function copyPayload() {
      const payload = getPayload();
    }

    // Event bindings
    elements.generateBtn.addEventListener('click', () => generate('wifi'));
    elements.generateUrlBtn.addEventListener('click', () => generate('url'));
    elements.downloadBtn.addEventListener('click', downloadQR);
    elements.downloadUrlBtn.addEventListener('click', downloadQR);
    elements.copyBtn.addEventListener('click', copyPayload);
    elements.copyUrlBtn.addEventListener('click', copyPayload);
  </script>
</body>

</html>
